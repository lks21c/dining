generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "sqlite"
}

model Restaurant {
  id               String  @id @default(cuid())
  name             String
  category         String
  description      String
  lat              Float
  lng              Float
  priceRange       String
  atmosphere       String
  goodFor          String
  rating           Float
  reviewCount      Int
  parkingAvailable Boolean @default(false)
  nearbyParking    String?

  @@index([lat, lng])
}

model Cafe {
  id               String  @id @default(cuid())
  name             String
  specialty        String
  description      String
  lat              Float
  lng              Float
  priceRange       String
  atmosphere       String
  goodFor          String
  rating           Float
  reviewCount      Int
  parkingAvailable Boolean @default(false)
  nearbyParking    String?

  @@index([lat, lng])
}

model ParkingLot {
  id             String @id @default(cuid())
  name           String
  type           String
  lat            Float
  lng            Float
  capacity       Int
  hourlyRate     Int
  description    String
  operatingHours String

  @@index([lat, lng])
}

model CrawledPlace {
  id          String        @id @default(cuid())
  name        String
  category    String?
  description String?
  address     String?
  lat         Float?
  lng         Float?
  phone       String?
  priceRange  String?
  atmosphere  String?
  goodFor     String?
  imageUrl    String?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  sources     PlaceSource[]

  @@index([lat, lng])
  @@index([name])
}

model PlaceSource {
  id             String       @id @default(cuid())
  crawledPlaceId String
  crawledPlace   CrawledPlace @relation(fields: [crawledPlaceId], references: [id], onDelete: Cascade)
  source         String
  sourceUrl      String?
  rating         Float?
  reviewCount    Int?
  snippet        String?
  metadata       String?
  crawledAt      DateTime     @default(now())

  @@unique([crawledPlaceId, source])
  @@index([source])
}
